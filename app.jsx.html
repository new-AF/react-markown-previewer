<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>
		Markdown Previewer
	</title>
	<script src="./libraries/babel.min.js"></script>
	<script src="./libraries/react.development.js"></script>
	<script src="./libraries/react-dom.development.js"></script>
	<script src="./libraries/marked.min.js"></script>
	
	<!-- code highlighting library prism.js -->
	<link rel="stylesheet" href="./libraries/prism.css">
	
	<!-- styles -->
	<link rel="stylesheet" href="./app.css">
	
</head>
  
<body>
	<main>
		<div id="react-container-1" class="react-container">
		
		<div>
	</main>
	

	<script>
		/* pre-set project in test suite and hide window */
		localStorage.setItem("fCC_markdown-previewer_hide", true);
		localStorage.setItem("project_selector", "markdown-previewer");
	</script>
	
	<script type="text/babel">
		const Text= props=>{
			const {id,style, input:textInput, onchange}= props;
			
			//box css
			const boxStyle={
				...style,
				'grid-column': '1/2',
				'box-shadow': '-0em -0em 2em -0.5em black',
				'resize': 'none',
				'display': 'grid',
				'grid-template-rows': 'auto 1fr',
				'align-content': 'stretch',
				'align-items': 'stretch',

			};
			const titleStyle={
				'text-align': 'center'
			};
			//textarea style
			const taStyle={
				'resize': 'none',
				'padding': '5%'
			};
			return (<div style={boxStyle}>
				<h2 style={titleStyle}>Editor</h2>
				<textarea id="editor" style={taStyle} value={textInput} onChange={onchange}/>
			</div>);
		};
		const Preview= props=>{
			const {id, style, output}= props;
			
			const boxStyle={
				...style,
				'box-shadow': '-0em -0em 2em -0.1em black',
				'display': 'grid',
				'grid-template-rows': 'auto 1fr',
				'align-content': 'stretch',
				'align-items': 'stretch'

			};
			const titleStyle={
				'text-align': 'center'
			};
			
			const contentStyle={
				'padding': '5%'
			};
			//innerHTML substitute
			const contentStyle2={
				__html: output
			};
			const jsx= (<div style={boxStyle}>
				<h2 style={titleStyle}>Preview</h2>
				<div id="preview" style={contentStyle} dangerouslySetInnerHTML={contentStyle2}></div>
			</div>);
						
			return jsx;
		};

		class App extends React.Component{
			constructor(props){
				super(props);
				 
				//pass optional test, convert line breaks to <br> and
				//set highlighter.
				marked.setOptions({'gfm': true, 'breaks':true});
				marked.setOptions({'highlight': (text, lang0)=>{
						const lang= Prism.languages.hasOwnProperty(lang0) ? lang0 : 'plaintext';
						return Prism.highlight(text, Prism.languages[lang], lang);
					}
				} );
				this.state={
					output: '',
					input: this.initialText()
				};
				this.inputOnChange= this.inputOnChange.bind(this);
				this.newState= this.newState.bind(this);
				this.initialText= this.initialText.bind(this);
				//pass 8th & last test
				window.onload=e=>this.setState({output: marked.parse(this.state.input)}); 

			}
			//only place that changes state
			newState(object){
				this.setState(prevState=> object);
			}
			inputOnChange(event){
				const text= event.target.value;
				

				//convert markdown to html and
				const html= marked.parse(text);
				this.newState({'input': text, 'output': html});
			}
			initialText(){
				const text=
`# About Me
---
## *I am* Abdullah Fatota
- *Frontend Developer*
- *Computer Scientist*

## Some of my projects
1. Work Break timer [Live App](https://new-af.github.io/) ;; [GitHub Repository](https://github.com/new-AF/react-redux-work-break-timer)
2. Product Page [Live Page](https://new-af.github.io/)

## Some preview image of live apps
1. <img src="https://new-af.github.io/assets/1%20react%20redux%201%20work%20break%20timer.png" width="320" height="auto">

2. <img src="https://new-af.github.io/assets/3%20html5%20css3%202%20product%20page.png" width="320" height="auto">

## Some of my Code snippets

### Inline code

\`const add= (a,b)=> a+b;\`

### Code Block

\`\`\`js
const add = (a, b) => {
  
  const result = a + b;

  return result;
}
\`\`\`
`;
				return text;
			}
			render(){
				const style= {
					'min-height': '100vh',
					'display': 'grid',
					'grid-template-rows': '0.5fr minmax(auto,5fr) 0.5fr',
					'grid-template-columns': '1fr 2fr',
					'grid-gap': '1em'
				};
				const titleStyle={
					'grid-column':'1/3',
					'justify-self': 'center',
					'align-self': 'center'
				};
				const byStyle={
					...titleStyle,
				};

				return (<div style={style}>
					<h1 style={titleStyle}>Markdown Previewer</h1>
					<Text input={this.state.input} onchange={this.inputOnChange}/>
					<Preview output={this.state.output}/>
					<div style={byStyle}>by Abdullah Fatota</div>
				</div>);
			}
		}
		
		
		const container=document.querySelector('#react-container-1');
		ReactDOM.render(<App/>,container);

	</script>
	
	<script src="./libraries/test bundle.js"></script>
	<script src="./libraries/prism.js"></script>
	
</body>

</html>